--- faac/frontend/Makefile.am.orig	2004-07-28 10:18:21.000000000 +0200
+++ faac/frontend/Makefile.am	2007-11-04 11:26:06.598027652 +0100
@@ -7,5 +7,9 @@
 LDADD = $(top_builddir)/libfaac/libfaac.la $(top_srcdir)/common/mp4v2/libmp4v2.la -lm -lstdc++
 else
 INCLUDES = -I$(top_srcdir)/include 
+if WITH_EXT_MP4V2
+LDADD = $(top_builddir)/libfaac/libfaac.la -lmp4v2 -lm -lstdc++
+else
 LDADD = $(top_builddir)/libfaac/libfaac.la -lm
 endif
+endif
--- faac/configure.in.orig	2007-08-20 20:03:22.000000000 +0200
+++ faac/configure.in	2007-11-04 11:20:45.451726567 +0100
@@ -28,6 +28,7 @@
 AC_CHECK_LIB(gnugetopt, getopt_long)
 
 AM_CONDITIONAL(WITH_MP4V2, false)
+AM_CONDITIONAL(WITH_EXT_MP4V2, false)
 
 AC_CHECK_DECLS([MP4Create, MP4MetadataDelete],
                AC_CHECK_LIB(mp4v2, MP4MetadataDelete, external_mp4v2=yes,
@@ -36,6 +37,8 @@
 
 if test x$external_mp4v2 = xyes; then
   AC_MSG_NOTICE([*** Building with external mp4v2 ***])
+  AM_CONDITIONAL(WITH_EXT_MP4V2, true)
+  MY_DEFINE(HAVE_LIBMP4V2)
 else
   if test x$WITHMP4V2 = xyes; then
      AC_MSG_NOTICE([*** Building with internal mp4v2 ***])
